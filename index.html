<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nivriti — Handmade Crafts</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- ================= HEADER ================= -->
  <header>
    <div class="container nav">
      <img src="images/logo.jpg" alt="Nivriti Logo" class="site-logo" />
      <nav>
        <a href="#products">Products</a>
        <a href="#order">Order</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <!-- ================= HERO ================= -->
  <section class="hero">
    <div class="hero-text">
      <h2>Handmade with Love ✨</h2>
      <p>Explore Nivriti’s colorful crafts — Fabricated Bangles, Scented Candles, and more — crafted to brighten your world.</p>
      <a href="#products" class="btn">Shop Now</a>
    </div>
  </section>

  <!-- ================= PRODUCTS ================= -->
  <section id="products" class="container">
    <h2 class="section-title">Our Products</h2>
    <div id="product-list" class="product-grid"></div>

<div id="product-list"></div>

  </section>

  <!-- ================= ORDER FORM ================= -->
  <section id="order" class="order-section">
    <h2 class="section-title">Place Your Order</h2>
    <form action="https://formspree.io/f/xldwarge" method="POST" class="order-form">
      <label>Your Name:<input type="text" name="name" required></label>
      <label>Address:<input type="text" name="address" required></label>
      <label>Mobile Number:<input type="tel" name="mobile" pattern="[0-9]{10,15}" placeholder="017XXXXXXXX" required></label>
      <label>Email Address:<input type="email" name="email" required></label>
      <label>Product Name:<input type="text" name="product" required></label>
      <label>Quantity:<input type="number" name="quantity" min="1" value="1" required></label>
      <label>Additional Notes:<textarea name="notes" rows="4" placeholder="Any special request..."></textarea></label>
      <button type="submit" class="btn">Submit Order</button>
<form class="order-form" id="order-form">
  <!-- product name input (readonly is optional) -->
  <input id="order-product-name" name="product_name" placeholder="Product name" readonly />

  <!-- other inputs... -->
  <textarea name="notes"></textarea>
  <button type="submit" class="btn">Submit order</button>


    </form>
  </section>

  <!-- ================= CONTACT ================= -->
  <section id="contact" class="contact-section">
    <h2 class="section-title">Get in Touch</h2>
    <p>Email: <a href="mailto:nivriti.shop.bd@gmail.com">nivriti.shop.bd@gmail.com</a></p>
    <p>Phone: +880 1614894716</p>
  </section>

  <!-- ================= COMMENTS ================= -->
  <section id="comments" class="container">
    <h2 class="section-title">Customer Reviews</h2>
    <div id="utterances-comments"></div>
  </section>

  <!-- ================= FOOTER ================= -->
  <footer>
    <p>© <span id="year"></span> Nivriti. All rights reserved.</p>
  </footer>

  <!-- ================= SCRIPT ================= -->
  <script>
    // Load current year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Fetch logo and products from JSON
    fetch('products.json')
      .then(res => res.json())
      .then(data => {
        // Set logo
        if (data.logo) {
          document.querySelector('.site-logo').src = data.logo;
        }

        // Render products
        // --- Render products (replace your current render code with this) ---
const container = document.getElementById('product-list');

container.innerHTML = data.products.map(p => `
  <div class="product-card">
    <img src="${p.image}" alt="${p.name}"
         onerror="this.onerror=null;this.src='https://via.placeholder.com/400x300?text=${encodeURIComponent(p.name)}';" />
    <h3>${p.name}</h3>
    <p>${p.desc}</p>
    <p class="price">${p.price}</p>
    <!-- type="button" prevents accidental form submit if nested inside a form -->
    <button type="button" class="btn order-now" data-product="${encodeURIComponent(p.name)}">Order Now</button>
  </div>
`).join('');

// --- Event delegation: handle clicks on any Order Now button ---
container.addEventListener('click', (e) => {
  const btn = e.target.closest('.order-now');
  if (!btn) return;

  const productName = decodeURIComponent(btn.dataset.product || '');

  // Find the product input in the order form. Try common selectors:
  const productInput =
    document.querySelector('#order-product-name') ||
    document.querySelector('input[name="product_name"]') ||
    document.querySelector('.order-form input[name="product_name"]');

  if (productInput) {
    productInput.value = productName;
    productInput.focus();

    // Scroll to the order section / form if present on the same page
    const orderSection =
      document.querySelector('.order-section') ||
      document.querySelector('form.order-form') ||
      document.getElementById('order-form');

    if (orderSection) {
      orderSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  } else {
    // Fallback: store and navigate to order page (change URL if your order page is different)
    localStorage.setItem('preselectedProduct', productName);
    // adjust '/order.html' to the real page if different
    window.location.href = '/order.html?product=' + encodeURIComponent(productName);
  }
});


    // Order form submit alert
    document.querySelector('.order-form').addEventListener('submit', function(e){
      e.preventDefault();
      alert('✅ Thank you! Your order has been received.');
      this.reset();
    });
  </script>

  <!-- Utterances script for comments -->
  <script src="https://utteranc.es/client.js"
          repo="nivriti-site/nivriti"
          issue-term="pathname"
          theme="github-light"
          crossorigin="anonymous"
          async>
  </script>
</body>
</html>
