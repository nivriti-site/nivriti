<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nivriti — Handmade Crafts</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- ================= HEADER ================= -->
  <header>
    <div class="container nav">
      <img src="images/logo.jpg" alt="Nivriti Logo" class="site-logo" />
      <nav>
        <a href="#products">Products</a>
        <a href="#order">Order</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <!-- ================= HERO ================= -->
  <section class="hero">
    <div class="hero-text">
      <h2>Handmade with Love ✨</h2>
      <p>Explore Nivriti’s colorful crafts — Fabricated Bangles, Scented Candles, and more — crafted to brighten your world.</p>
      <a href="#products" class="btn">Shop Now</a>
    </div>
  </section>

  <!-- ================= PRODUCTS ================= -->
  <section id="products" class="container">
    <h2 class="section-title">Our Products</h2>
    <div id="product-list" class="product-grid"></div>
  </section>

  <!-- ================= ORDER SECTION ================= -->
  <section id="order" class="order-section">
    <h2 class="section-title">Place Your Order</h2>

    <!-- Custom Order Form -->
    <form action="https://formspree.io/f/xldwarge" method="POST" class="order-form" id="order-form">
      <label>Your Name:<input type="text" name="name" required></label>
      <label>Address:<input type="text" name="address" required></label>
      <label>Mobile Number:<input type="tel" name="mobile" pattern="[0-9]{10,15}" placeholder="01XXXXXXXXX" required></label>
      <label>Email Address:<input type="email" name="email" required></label>
      <label>Product Name:<input type="text" id="order-product-name" name="product" required></label>
      <label>Quantity:<input type="number" name="quantity" min="1" value="1" required></label>
      <label>Additional Notes:<textarea name="notes" rows="4" placeholder="Any special request..."></textarea></label>
      <button type="submit" class="btn">Submit Order</button>
    </form>
  </section>

  <!-- ================= CONTACT ================= -->
  <section id="contact" class="contact-section">
    <h2 class="section-title">Get in Touch</h2>
    <p>Email: <a href="mailto:nivriti.shop.bd@gmail.com">nivriti.shop.bd@gmail.com</a></p>
    <p>Phone: +880 1614894716</p>
  </section>

  <!-- ================= COMMENTS ================= -->
  <section id="comments" class="container">
    <h2 class="section-title">Customer Reviews</h2>
    <div id="utterances-comments"></div>
  </section>

  <!-- ================= FOOTER ================= -->
  <footer>
    <p>© <span id="year"></span> Nivriti. All rights reserved.</p>
  </footer>

  <!-- ================= SCRIPT ================= -->
  <script>
    // Load current year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Fetch logo and products from JSON
    fetch('products.json')
      .then(res => res.json())
      .then(data => {
        // Set logo
        if (data.logo) {
          document.querySelector('.site-logo').src = data.logo;
        }

        // Render products
        const container = document.getElementById('product-list');
        container.innerHTML = data.products.map(p => `
          <div class="product-card">
            <img src="${p.image}" alt="${p.name}"
                 onerror="this.onerror=null;this.src='https://via.placeholder.com/400x400?text=${encodeURIComponent(p.name)}';" />
            <h3>${p.name}</h3>
            <p>${p.desc}</p>
            <p class="price">${p.price}</p>
            <button type="button" class="btn btn-order" data-product="${encodeURIComponent(p.name)}">Order Now</button>
          </div>
        `).join('');
      });

    // Handle Order Now button clicks
    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("btn-order")) {
        const productName = decodeURIComponent(e.target.dataset.product);
        const productInput = document.getElementById("order-product-name");
        productInput.value = productName;
        document.getElementById("order").scrollIntoView({ behavior: "smooth" });
      }
    });

    // Handle Formspree submission
    document.getElementById("order-form").addEventListener("submit", function(e) {
      e.preventDefault();
      const form = e.target;

      fetch(form.action, {
        method: "POST",
        body: new FormData(form),
        headers: { 'Accept': 'application/json' }
      })
      .then(response => {
        if (response.ok) {
          alert("✅ Thank you! Your order has been submitted.");
          form.reset();
        } else {
          alert("⚠️ There was an issue sending your order. Please try again.");
        }
      })
      .catch(() => {
        alert("⚠️ Network error. Please check your connection and try again.");
      });
    });
  </script>

  <!-- Utterances script for comments -->
  <script src="https://utteranc.es/client.js"
          repo="nivriti-site/nivriti"
          issue-term="pathname"
          theme="github-light"
          crossorigin="anonymous"
          async>
  </script>
</body>
</html>
